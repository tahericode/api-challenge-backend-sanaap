#!/usr/bin/env bash

set -e

CMD="$1"

if [ -z "$CMD" ]; then
  echo "Usage: $0 <command>"
  echo
  echo "Available commands:"
  echo "  dev    Build and run the full stack with Docker (DB, Redis, MinIO, web)"
  echo
  exit 1
fi

run_docker_compose() {
  if command -v docker-compose >/dev/null 2>&1; then
    docker-compose "$@"
  else
    docker compose "$@"
  fi
}

case "$CMD" in
  dev)
    echo "Starting development environment with Docker..."
    echo "This will build the image and run: db, redis, minio, web"
    run_docker_compose up --build
    ;;

  *)
    echo "Unknown command: $CMD"
    echo "Available commands: dev"
    exit 1
    ;;
esac


